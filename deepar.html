<!DOCTYPE html>
<html>
  <head>
    <title>DeepAR from a CDN</title>
    <!-- Load deepar.js -->
    <script src="https://cdn.jsdelivr.net/npm/deepar/js/deepar.js"></script>
  </head>

  <body style="height: 100vh; width: 100vw; margin: 0; overflow: hidden">
    <!-- Canvas element for AR preview -->
    <div>
      <button id="backwardBtn">Backward</button>
      <button id="forwardBtn">Forward</button>
    </div>
    <canvas
      style="max-width: 100%; max-height: 100%; width: 100%; height: 100%"
      id="deepar-canvas"
    ></canvas>
    <!-- Buttons to start and stop the prediction engine -->

    <!-- Initialize DeepAR and load AR effect/filter -->
    <script>
      let effects = [
        {
          id: "1",
          effect: "https://cdn.jsdelivr.net/npm/deepar/effects/aviators",
          product_name: "aa",
        },
        {
          id: "2",
          effect: "./effects/sunglas.deepar",
          product_name: "aa",
        },
        {
          id: "3",
          effect: "./effects/Red-Glass-Frame-with-Black-Metal.deepar",
          product_name: "aa",
        },
        {
          id: "4",
          effect: "./effects/handleless-Red-Glass.deepar",
          product_name: "aa",
        },
      ];
      let currentIndex = 3;

      const forwardBtn = document.getElementById("forwardBtn");
      const backwardBtn = document.getElementById("backwardBtn");

      forwardBtn.addEventListener("click", () => {
        currentIndex = currentIndex + 1;
        console.log("Forward Index:", currentIndex);
        // You can perform actions here based on the currentIndex
      });

      backwardBtn.addEventListener("click", () => {
        currentIndex = currentIndex - 1;
        console.log("Backward Index:", currentIndex);
        // You can perform actions here based on the currentIndex
      });
      (async function () {
        const canvas = document.getElementById("deepar-canvas");
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.floor(canvas.clientWidth * dpr);
        canvas.height = Math.floor(canvas.clientHeight * dpr);

        const deepAR = await deepar.initialize({
          licenseKey:
            "ce036f51766b00e5e92d6ce685e652ed9aba1f244cc9a500294f72f366f929a637eefa7fc2effa6a",
          canvas: document.getElementById("deepar-canvas"),
          effect: effects[currentIndex].effect,
        });
      })();
      console.log("effects current index", effects[currentIndex]);
    </script>
  </body>
</html>
